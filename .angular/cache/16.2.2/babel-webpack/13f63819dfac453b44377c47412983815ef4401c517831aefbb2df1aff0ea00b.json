{"ast":null,"code":"var _class;\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/common/http\";\nimport * as i3 from \"../booking.service\";\nimport * as i4 from \"../seat.service\";\nimport * as i5 from \"@angular/common\";\nfunction SummaryComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\")(2, \"h3\");\n    i0.ɵɵtext(3, \"Passenger Details\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"p\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"p\");\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(10, \"div\")(11, \"h3\");\n    i0.ɵɵtext(12, \"Seat Details\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"p\");\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"p\");\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const data_r1 = ctx.$implicit;\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\"Name: \", data_r1.passengerDetails.passengerName, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Age: \", data_r1.passengerDetails.passengerAge, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Gender: \", data_r1.passengerDetails.passengerGender, \"\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\"Seat Status: \", data_r1.seatStatus, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Seat Price: \", data_r1.seatPrice, \"\");\n  }\n}\nexport class SummaryComponent {\n  constructor(router, http, bookingService, seatService) {\n    this.router = router;\n    this.http = http;\n    this.bookingService = bookingService;\n    this.seatService = seatService;\n    this.passengerDataArray = this.bookingService.getconfirmSeats();\n  }\n  ngOnInit() {\n    console.log(this.passengerDataArray + 'pass');\n    this.totalSeatPrice = this.passengerDataArray.reduce((total, data) => total + data.seatPrice, 0);\n  }\n  onSubmit() {\n    for (const dta of this.passengerDataArray) {\n      const data = {\n        seatStatus: 'booked',\n        seatPrice: dta.seatPrice,\n        passengerDetails: {\n          passengerName: dta.passengerData.passengerName,\n          passengerAge: dta.passengerData.passengerAge,\n          passengerGender: dta.passengerData.passengerGender\n        }\n      };\n      const busId = this.seatService.getBusData();\n      this.http.put('https://go-travel-42246-default-rtdb.firebaseio.com/busses/-' + busId + '/seats/' + dta.seatName + '.json', data).subscribe(res => {\n        console.log(dta.seatName + res + 'success' + busId);\n      }, error => {\n        console.log(error);\n      });\n    }\n  }\n}\n_class = SummaryComponent;\n_class.ɵfac = function SummaryComponent_Factory(t) {\n  return new (t || _class)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.HttpClient), i0.ɵɵdirectiveInject(i3.BookingService), i0.ɵɵdirectiveInject(i4.SeatService));\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"app-summary\"]],\n  decls: 6,\n  vars: 2,\n  consts: [[4, \"ngFor\", \"ngForOf\"], [1, \"btn\", \"btn-primary\", 3, \"click\"]],\n  template: function SummaryComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\");\n      i0.ɵɵtemplate(1, SummaryComponent_div_1_Template, 17, 5, \"div\", 0);\n      i0.ɵɵelementStart(2, \"p\");\n      i0.ɵɵtext(3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"button\", 1);\n      i0.ɵɵlistener(\"click\", function SummaryComponent_Template_button_click_4_listener() {\n        return ctx.onSubmit();\n      });\n      i0.ɵɵtext(5, \"Confirm Book\");\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngForOf\", ctx.passengerDataArray);\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate1(\"Total Price: \", ctx.totalSeatPrice, \"\");\n    }\n  },\n  dependencies: [i5.NgForOf],\n  styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"names":["i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate1","data_r1","passengerDetails","passengerName","passengerAge","passengerGender","seatStatus","seatPrice","SummaryComponent","constructor","router","http","bookingService","seatService","passengerDataArray","getconfirmSeats","ngOnInit","console","log","totalSeatPrice","reduce","total","data","onSubmit","dta","passengerData","busId","getBusData","put","seatName","subscribe","res","error","ɵɵdirectiveInject","i1","Router","i2","HttpClient","i3","BookingService","i4","SeatService","selectors","decls","vars","consts","template","SummaryComponent_Template","rf","ctx","ɵɵtemplate","SummaryComponent_div_1_Template","ɵɵlistener","SummaryComponent_Template_button_click_4_listener","ɵɵproperty"],"sources":["E:\\Web\\academy-project\\src\\app\\summary\\summary.component.ts","E:\\Web\\academy-project\\src\\app\\summary\\summary.component.html"],"sourcesContent":["import { HttpClient } from '@angular/common/http';\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { BookingService } from '../booking.service';\r\nimport { SeatService } from '../seat.service';\r\n\r\n@Component({\r\n  selector: 'app-summary',\r\n  templateUrl: './summary.component.html',\r\n  styleUrls: ['./summary.component.css']\r\n})\r\nexport class SummaryComponent implements OnInit{\r\n\r\n  constructor(private router: Router, private http: HttpClient, private bookingService: BookingService, private seatService: SeatService) { }\r\n\r\n  passengerDataArray = this.bookingService.getconfirmSeats();\r\n  totalSeatPrice: number;\r\n  \r\n  ngOnInit(){\r\n    console.log(this.passengerDataArray + 'pass');\r\n    this.totalSeatPrice = this.passengerDataArray.reduce((total, data) => total + data.seatPrice, 0);\r\n  }\r\n\r\n  onSubmit(){\r\n    for(const dta of this.passengerDataArray){\r\n\r\n      const data = {\r\n        seatStatus: 'booked',\r\n        seatPrice: dta.seatPrice,\r\n        passengerDetails: {\r\n         passengerName: dta.passengerData.passengerName,\r\n         passengerAge: dta.passengerData.passengerAge,\r\n         passengerGender: dta.passengerData.passengerGender,\r\n        },\r\n      }\r\n\r\n      const busId = this.seatService.getBusData();\r\n\r\n      this.http.put('https://go-travel-42246-default-rtdb.firebaseio.com/busses/-' + busId +'/seats/' + dta.seatName +'.json', data)\r\n      .subscribe((res) =>{\r\n        console.log(dta.seatName + res+ 'success'+ busId);\r\n      },\r\n      error => {\r\n        console.log(error);\r\n      }\r\n      );\r\n    }\r\n  }\r\n\r\n\r\n\r\n}\r\n","<div>\r\n  <div *ngFor=\"let data of passengerDataArray\">\r\n    <div>\r\n      <h3>Passenger Details</h3>\r\n      <p>Name: {{ data.passengerDetails.passengerName }}</p>\r\n      <p>Age: {{ data.passengerDetails.passengerAge }}</p>\r\n      <p>Gender: {{ data.passengerDetails.passengerGender }}</p>\r\n    </div>\r\n    <div>\r\n      <h3>Seat Details</h3>\r\n      <p>Seat Status: {{ data.seatStatus }}</p>\r\n      <p>Seat Price: {{ data.seatPrice }}</p>\r\n    </div>\r\n  </div>\r\n\r\n  <p>Total Price: {{ totalSeatPrice }}</p>\r\n\r\n  <button class=\"btn btn-primary\" (click)=\"onSubmit()\">Confirm Book</button>\r\n</div>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}