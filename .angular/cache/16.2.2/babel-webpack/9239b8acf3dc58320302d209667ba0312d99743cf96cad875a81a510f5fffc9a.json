{"ast":null,"code":"var _class;\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/common/http\";\nimport * as i3 from \"../booking.service\";\nimport * as i4 from \"../seat.service\";\nexport class SummaryComponent {\n  constructor(router, http, bookingService, seatService) {\n    this.router = router;\n    this.http = http;\n    this.bookingService = bookingService;\n    this.seatService = seatService;\n    this.passengerDataArray = this.bookingService.getconfirmSeats();\n    this.totalSeatPrice = passengerDataArray.reduce((total, data) => total + data.seatPrice, 0);\n  }\n  onSubmit() {\n    for (const dta of this.passengerDataArray) {\n      const data = {\n        seatStatus: 'booked',\n        seatPrice: dta.seatPrice,\n        passengerDetails: {\n          passengerName: dta.passengerData.passengerName,\n          passengerAge: dta.passengerData.passengerAge,\n          passengerGender: dta.passengerData.passengerGender\n        }\n      };\n      const busId = this.seatService.getBusData();\n      this.http.put('https://go-travel-42246-default-rtdb.firebaseio.com/busses/-' + busId + '/seats/' + dta.seatName + '.json', data).subscribe(res => {\n        console.log(dta.seatName + res + 'success' + busId);\n      }, error => {\n        console.log(error);\n      });\n    }\n  }\n}\n_class = SummaryComponent;\n_class.ɵfac = function SummaryComponent_Factory(t) {\n  return new (t || _class)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.HttpClient), i0.ɵɵdirectiveInject(i3.BookingService), i0.ɵɵdirectiveInject(i4.SeatService));\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"app-summary\"]],\n  decls: 0,\n  vars: 0,\n  template: function SummaryComponent_Template(rf, ctx) {},\n  styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"names":["SummaryComponent","constructor","router","http","bookingService","seatService","passengerDataArray","getconfirmSeats","totalSeatPrice","reduce","total","data","seatPrice","onSubmit","dta","seatStatus","passengerDetails","passengerName","passengerData","passengerAge","passengerGender","busId","getBusData","put","seatName","subscribe","res","console","log","error","i0","ɵɵdirectiveInject","i1","Router","i2","HttpClient","i3","BookingService","i4","SeatService","selectors","decls","vars","template","SummaryComponent_Template","rf","ctx","styles"],"sources":["E:\\Web\\academy-project\\src\\app\\summary\\summary.component.ts"],"sourcesContent":["import { HttpClient } from '@angular/common/http';\r\nimport { Component } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { BookingService } from '../booking.service';\r\nimport { SeatService } from '../seat.service';\r\n\r\n@Component({\r\n  selector: 'app-summary',\r\n  templateUrl: './summary.component.html',\r\n  styleUrls: ['./summary.component.css']\r\n})\r\nexport class SummaryComponent {\r\n\r\n  constructor(private router: Router, private http: HttpClient, private bookingService: BookingService, private seatService: SeatService) { }\r\n\r\n  passengerDataArray = this.bookingService.getconfirmSeats();\r\nconst totalSeatPrice = passengerDataArray.reduce((total, data) => total + data.seatPrice, 0);\r\n\r\n\r\n  onSubmit(){\r\n    for(const dta of this.passengerDataArray){\r\n\r\n      const data = {\r\n        seatStatus: 'booked',\r\n        seatPrice: dta.seatPrice,\r\n        passengerDetails: {\r\n         passengerName: dta.passengerData.passengerName,\r\n         passengerAge: dta.passengerData.passengerAge,\r\n         passengerGender: dta.passengerData.passengerGender,\r\n        },\r\n      }\r\n\r\n      const busId = this.seatService.getBusData();\r\n\r\n      this.http.put('https://go-travel-42246-default-rtdb.firebaseio.com/busses/-' + busId +'/seats/' + dta.seatName +'.json', data)\r\n      .subscribe((res) =>{\r\n        console.log(dta.seatName + res+ 'success'+ busId);\r\n      },\r\n      error => {\r\n        console.log(error);\r\n      }\r\n      );\r\n    }\r\n  }\r\n\r\n\r\n\r\n}\r\n"],"mappings":";;;;;;AAWA,OAAM,MAAOA,gBAAgB;EAE3BC,YAAoBC,MAAc,EAAUC,IAAgB,EAAUC,cAA8B,EAAUC,WAAwB;IAAlH,KAAAH,MAAM,GAANA,MAAM;IAAkB,KAAAC,IAAI,GAAJA,IAAI;IAAsB,KAAAC,cAAc,GAAdA,cAAc;IAA0B,KAAAC,WAAW,GAAXA,WAAW;IAEzH,KAAAC,kBAAkB,GAAG,IAAI,CAACF,cAAc,CAACG,eAAe,EAAE;IACtD,KAAAC,cAAc,GAAGF,kBAAkB,CAACG,MAAM,CAAC,CAACC,KAAK,EAAEC,IAAI,KAAKD,KAAK,GAAGC,IAAI,CAACC,SAAS,EAAE,CAAC,CAAC;EAHgD;EAM1IC,QAAQA,CAAA;IACN,KAAI,MAAMC,GAAG,IAAI,IAAI,CAACR,kBAAkB,EAAC;MAEvC,MAAMK,IAAI,GAAG;QACXI,UAAU,EAAE,QAAQ;QACpBH,SAAS,EAAEE,GAAG,CAACF,SAAS;QACxBI,gBAAgB,EAAE;UACjBC,aAAa,EAAEH,GAAG,CAACI,aAAa,CAACD,aAAa;UAC9CE,YAAY,EAAEL,GAAG,CAACI,aAAa,CAACC,YAAY;UAC5CC,eAAe,EAAEN,GAAG,CAACI,aAAa,CAACE;;OAErC;MAED,MAAMC,KAAK,GAAG,IAAI,CAAChB,WAAW,CAACiB,UAAU,EAAE;MAE3C,IAAI,CAACnB,IAAI,CAACoB,GAAG,CAAC,8DAA8D,GAAGF,KAAK,GAAE,SAAS,GAAGP,GAAG,CAACU,QAAQ,GAAE,OAAO,EAAEb,IAAI,CAAC,CAC7Hc,SAAS,CAAEC,GAAG,IAAI;QACjBC,OAAO,CAACC,GAAG,CAACd,GAAG,CAACU,QAAQ,GAAGE,GAAG,GAAE,SAAS,GAAEL,KAAK,CAAC;MACnD,CAAC,EACDQ,KAAK,IAAG;QACNF,OAAO,CAACC,GAAG,CAACC,KAAK,CAAC;MACpB,CAAC,CACA;;EAEL;;SAhCW7B,gBAAgB;;mBAAhBA,MAAgB,EAAA8B,EAAA,CAAAC,iBAAA,CAAAC,EAAA,CAAAC,MAAA,GAAAH,EAAA,CAAAC,iBAAA,CAAAG,EAAA,CAAAC,UAAA,GAAAL,EAAA,CAAAC,iBAAA,CAAAK,EAAA,CAAAC,cAAA,GAAAP,EAAA,CAAAC,iBAAA,CAAAO,EAAA,CAAAC,WAAA;AAAA;;QAAhBvC,MAAgB;EAAAwC,SAAA;EAAAC,KAAA;EAAAC,IAAA;EAAAC,QAAA,WAAAC,0BAAAC,EAAA,EAAAC,GAAA;EAAAC,MAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}